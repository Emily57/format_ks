<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MG式ks自動整形ツール</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <h1>MG式ks自動整形ツール</h1>
    <div class="specification-section">
      <h2 class="accordion-header">
        <span class="accordion-icon">▶︎</span>仕様
      </h2>
      <div class="spec-content accordion-content hidden">
        <section class="spec-block">
          <h3>前提</h3>
          <ul>
            <li><code>[]</code>で囲まれたものを<b>タグ</b>と呼ぶ</li>
            <li>
              <code>*</code>または<code>; *</code
              >で始まる行を<b>ラベル</b>と呼ぶ
            </li>
          </ul>
        </section>

        <section class="spec-block">
          <h3>処理ルール</h3>
          <p class="note">上から順に処理を実行</p>
          <ul>
            <li>空行をすべて削除</li>
            <li>各行の先頭と末尾にある余分な空白を削除</li>
            <li>
              以下のタグが行末にない場合、改行を追加して行末にする
              <div class="code-block">
                <code>[r]</code>, <code>[p]</code>, <code>[s]</code>,
                <code>[iscript]</code>, <code>[endscript]</code>
              </div>
            </li>
            <li>
              <code>[p]</code>の次の行に必ず空行を1行追加。ただし、次の行が<code
                >; end</code
              >の場合は追加しない
            </li>
            <li>
              <code>; end</code>の次の行に空行を1行追加。ただし、次の行が<code
                >; end</code
              >の場合は追加しない
            </li>
            <li>
              <code>[iscript]</code> または
              <code>[endscript]</code
              >が行頭にない場合、直前に改行を追加して、行頭にする
            </li>
            <li>
              ラベル行（<code>*test</code> など）から<code>; end</code
              >の行までを1つのブロックとし、ブロックごとに半角スペース2つのインデントを追加する
            </li>
            <li>
              ネスト（入れ子）になっている場合、インデントは 2つ → 4つ → 6つ...
              と増加させる。ただし、その行が空行の場合はインデントを追加しない
            </li>
            <li>
              <code>[iscript]</code> から
              <code>[endscript]</code
              >までを1つのブロックとし、ブロックごとに半角スペース2つのインデントを追加する
            </li>
            <li>タグの中の「引数」は、「"（ダブルクォーテーション）」で囲む</li>
          </ul>
        </section>
      </div>
    </div>
    <div class="container">
      <div class="input-section">
        <h2>入力</h2>
        <textarea
          id="input"
          placeholder="テキストを入力してください..."
          rows="20"
        ></textarea>
      </div>
      <div class="output-section">
        <h2>出力</h2>
        <div class="output-container">
          <pre id="output"></pre>
          <button id="copy-button">コピー</button>
        </div>
      </div>
    </div>
    <div class="footer">
      <div class="notice">
        <p>・ティラノスクリプト非公式の .ks ファイル整形ツールです</p>
        <p>・MizGracia 独自のルールで自動整形されます</p>
        <p>・勝手に第三者に情報が送信されるようなことはありません</p>
        <p>・要望、質問等は一切受け付けていません</p>
      </div>
      <div class="links">
        <a
          href="https://github.com/Emily57/format_ks"
          target="_blank"
          rel="noopener noreferrer"
          class="link-button"
        >
          <img
            src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png"
            alt="GitHub"
            class="icon"
          />
          ソースコード
        </a>
        <a
          href="https://x.com/miz_vhb"
          target="_blank"
          rel="noopener noreferrer"
          class="link-button"
        >
          <svg viewbox="0 0 1200 1227" xmlns="http://www.w3.org/2000/svg">
            <path
              d="m714.163 519.284 446.727-519.284h-105.86l-387.893 450.887-309.809-450.887h-357.328l468.492 681.821-468.492 544.549h105.866l409.625-476.152 327.181 476.152h357.328l-485.863-707.086zm-144.998 168.544-47.468-67.894-377.686-540.2396h162.604l304.797 435.9906 47.468 67.894 396.2 566.721h-162.604l-323.311-462.446z"
            ></path>
          </svg>
          @miz_vhb
        </a>
      </div>
    </div>
    <script src="textProcessor.js"></script>
    <script src="script.js"></script>
  </body>
</html>
